<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>フラッシュカード</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f0f4f8;
        }
        .card {
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        .card.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .card-front {
            background-color: white;
        }
        .card-back {
            background-color: #3b82f6;
            color: white;
            transform: rotateY(180deg);
        }
        .text-xl-custom {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
        }
        .text-2xl-custom {
            font-size: clamp(2rem, 7vw, 3rem);
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <div id="start-screen" class="w-full max-w-md p-6 bg-white rounded-2xl shadow-xl fade-in">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">フラッシュカードを選んでください</h1>
        <div class="space-y-4">
            <button id="card-type-wareki" class="w-full py-4 bg-indigo-500 hover:bg-indigo-600 text-white font-bold rounded-xl shadow-lg transition-transform transform hover:scale-105">
                和暦
            </button>
            <button id="card-type-hizuke" class="w-full py-4 bg-green-500 hover:bg-green-600 text-white font-bold rounded-xl shadow-lg transition-transform transform hover:scale-105">
                日付
            </button>
            <button id="card-type-kazoe" class="w-full py-4 bg-pink-500 hover:bg-pink-600 text-white font-bold rounded-xl shadow-lg transition-transform transform hover:scale-105">
                数え方
            </button>
        </div>
    </div>

    <div id="game-screen" class="hidden w-full max-w-md p-6 bg-white rounded-2xl shadow-xl fade-in">
        <div class="flex justify-center space-x-4 mb-4">
            <button id="random-mode-btn" class="py-2 px-6 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold rounded-full transition-colors">
                ランダム
            </button>
            <button id="sequential-mode-btn" class="py-2 px-6 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold rounded-full transition-colors">
                順番
            </button>
        </div>
        <div id="card-container" class="relative w-full h-80 mb-6">
            <div id="flashcard" class="card absolute w-full h-full">
                <div id="card-front" class="card-face card-front p-4">
                    <span class="text-xl-custom font-bold text-gray-800 text-center"></span>
                </div>
                <div id="card-back" class="card-face card-back p-4">
                    <span class="text-2xl-custom font-bold text-center"></span>
                </div>
            </div>
        </div>
        <div class="flex justify-between items-center mb-4">
            <button id="prev-btn" class="py-2 px-4 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold rounded-full transition-transform transform hover:scale-105">
                前のカード
            </button>
            <div id="card-counter" class="text-lg font-bold text-gray-600"></div>
            <button id="next-btn" class="py-2 px-4 bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-full transition-transform transform hover:scale-105">
                次のカード
            </button>
        </div>
        <button id="back-btn" class="w-full py-3 bg-gray-500 hover:bg-gray-600 text-white font-bold rounded-xl transition-transform transform hover:scale-105">
            種類選択に戻る
        </button>
    </div>

    <script>
        // データ定義
        const cardData = {
            wareki: [
                { front: '1月', back: 'むつき' },
                { front: '2月', back: 'きさらぎ' },
                { front: '3月', back: 'やよい' },
                { front: '4月', back: 'うづき' },
                { front: '5月', back: 'さつき' },
                { front: '6月', back: 'みなづき' },
                { front: '7月', back: 'ふみづき' },
                { front: '8月', back: 'はづき' },
                { front: '9月', back: 'ながつき' },
                { front: '10月', back: 'かんなづき' },
                { front: '11月', back: 'しもつき' },
                { front: '12月', back: 'しわす' },
            ],
            hizuke: [
                { front: '1日', back: 'ついたち' },
                { front: '2日', back: 'ふつか' },
                { front: '3日', back: 'みっか' },
                { front: '4日', back: 'よっか' },
                { front: '5日', back: 'いつか' },
                { front: '6日', back: 'むいか' },
                { front: '7日', back: 'なのか' },
                { front: '8日', back: 'ようか' },
                { front: '9日', back: 'ここのか' },
                { front: '10日', back: 'とおか' },
            ],
            kazoe: [
                { front: '1つ', back: 'ひとつ' },
                { front: '2つ', back: 'ふたつ' },
                { front: '3つ', back: 'みっつ' },
                { front: '4つ', back: 'よっつ' },
                { front: '5つ', back: 'いつつ' },
                { front: '6つ', back: 'むっつ' },
                { front: '7つ', back: 'ななつ' },
                { front: '8つ', back: 'やっつ' },
                { front: '9つ', back: 'ここのつ' },
                { front: '10', back: 'とお' },
            ]
        };

        // DOM要素の取得
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const flashcard = document.getElementById('flashcard');
        const cardFrontText = document.querySelector('#card-front span');
        const cardBackText = document.querySelector('#card-back span');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const backBtn = document.getElementById('back-btn');
        const cardCounter = document.getElementById('card-counter');
        const randomModeBtn = document.getElementById('random-mode-btn');
        const sequentialModeBtn = document.getElementById('sequential-mode-btn');

        let originalCards = [];
        let currentCards = [];
        let currentIndex = 0;
        let isFlipped = false;

        // イベントリスナーの設定
        document.getElementById('card-type-wareki').addEventListener('click', () => startGame('wareki'));
        document.getElementById('card-type-hizuke').addEventListener('click', () => startGame('hizuke'));
        document.getElementById('card-type-kazoe').addEventListener('click', () => startGame('kazoe'));
        backBtn.addEventListener('click', backToStartScreen);
        flashcard.addEventListener('click', flipCard);
        nextBtn.addEventListener('click', showNextCard);
        prevBtn.addEventListener('click', showPrevCard);
        randomModeBtn.addEventListener('click', setRandomMode);
        sequentialModeBtn.addEventListener('click', setSequentialMode);

        // ゲーム開始
        function startGame(type) {
            // 元の配列を保存
            originalCards = [...cardData[type]];
            // デフォルトでランダムモードで開始
            setRandomMode();
            startScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
        }

        // カードをシャッフルしてランダムモードにする
        function setRandomMode() {
            currentCards = shuffle(originalCards);
            currentIndex = 0;
            updateCard();
            randomModeBtn.classList.add('bg-blue-500', 'text-white');
            sequentialModeBtn.classList.remove('bg-blue-500', 'text-white');
        }

        // カードを元の順番に戻して順番モードにする
        function setSequentialMode() {
            currentCards = [...originalCards];
            currentIndex = 0;
            updateCard();
            sequentialModeBtn.classList.add('bg-blue-500', 'text-white');
            randomModeBtn.classList.remove('bg-blue-500', 'text-white');
        }

        // カードをシャッフルする
        function shuffle(array) {
            let shuffledArray = [...array];
            for (let i = shuffledArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledArray[i], shuffledArray[j]] = [shuffledArray[j], shuffledArray[i]];
            }
            return shuffledArray;
        }

        // カードの表示を更新
        function updateCard() {
            if (currentCards.length === 0) return;
            isFlipped = false;
            flashcard.classList.remove('is-flipped');
            cardFrontText.textContent = currentCards[currentIndex].front;
            cardBackText.textContent = currentCards[currentIndex].back;
            cardCounter.textContent = `${currentIndex + 1} / ${currentCards.length}`;
        }

        // カードを裏返す
        function flipCard() {
            isFlipped = !isFlipped;
            if (isFlipped) {
                flashcard.classList.add('is-flipped');
            } else {
                flashcard.classList.remove('is-flipped');
            }
        }

        // 次のカードへ
        function showNextCard() {
            currentIndex = (currentIndex + 1) % currentCards.length;
            updateCard();
        }

        // 前のカードへ
        function showPrevCard() {
            currentIndex = (currentIndex - 1 + currentCards.length) % currentCards.length;
            updateCard();
        }

        // 開始画面に戻る
        function backToStartScreen() {
            gameScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }
    </script>
</body>
</html>
